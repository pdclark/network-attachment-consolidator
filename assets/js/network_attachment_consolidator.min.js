/*! Network Attachment Consolidator - v0.1.0
 * http://knowmike.com
 * Copyright (c) 2014; * Licensed GPLv2+ */
(function(e,n){"use strict";function t(e){e.preventDefault(),u.is(":disabled")||(u.attr("disabled","disabled"),m.removeAttr("disabled"),f.html("Running..."),l=!0,i())}function a(e){"function"==typeof e.preventDefault&&e.preventDefault(),m.is(":disabled")||(m.attr("disabled","disabled"),u.removeAttr("disabled"),l=!1,e.complete||f.html("Paused"))}function i(){l&&r.ajax.send({data:{action:"naconsolidator-ajax",nonce:s}}).done(o).fail(d)}function o(e){p.html(_.escape(e)),"Finished"!==e?i():(f.html("Complete"),a({complete:!0}))}function d(e){a({}),p.html("Error: "+_.escape(e))}function c(){return l?"Warning: The image consolidation script is currently running.":undefined}var l=!1,s=n.nacNonce||"",r=n.wp||{ajax:{}};if("function"==typeof r.ajax.send){var u=e(document.getElementById("nac-start")),m=e(document.getElementById("nac-stop")),f=e(document.getElementById("nac-status")),p=e(document.getElementById("nac-next-step"));u.on("click",t),m.on("click",a),e(n).on("beforeunload",c)}})(jQuery,this);