/*! Network Attachment Consolidator - v0.1.0
 * http://knowmike.com
 * Copyright (c) 2014; * Licensed GPLv2+ */
(function(e,n){"use strict";function t(e){e.preventDefault(),f.prop("disabled",!0),p.ajax.send({data:{action:"nac-ignoregalleries-ajax",nonce:u,ignore:f.prop("checked")?"1":"0"}}).done(a).fail(a)}function a(e){"boolean"==typeof e&&f.prop("checked",e),f.prop("disabled",!1)}function o(e){e.preventDefault(),m.is(":disabled")||(m.attr("disabled","disabled"),g.removeAttr("disabled"),b.html("Running..."),s=!0,c())}function i(e){"function"==typeof e.preventDefault&&e.preventDefault(),g.is(":disabled")||(g.attr("disabled","disabled"),m.removeAttr("disabled"),s=!1,e.complete||b.html("Paused"))}function c(){s&&p.ajax.send({data:{action:"naconsolidator-ajax",nonce:u}}).done(d).fail(l)}function d(e){h.html(_.escape(e)),"Finished"!==e?c():(b.html("Complete"),i({complete:!0}))}function l(e){i({}),h.html("Error: "+_.escape(e))}function r(){return s?"Warning: The image consolidation script is currently running.":undefined}var s=!1,u=n.nacNonce||"",p=n.wp||{ajax:{}};if("function"==typeof p.ajax.send){var f=e(document.getElementById("nac-ignore-galleries")),m=e(document.getElementById("nac-start")),g=e(document.getElementById("nac-stop")),b=e(document.getElementById("nac-status")),h=e(document.getElementById("nac-next-step"));f.on("change",t),m.on("click",o),g.on("click",i),e(n).on("beforeunload",r)}})(jQuery,this);